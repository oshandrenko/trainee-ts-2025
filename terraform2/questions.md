# RDS Aurora: Ключевая разница

**Ключевая разница с стандартным RDS:**
- Aurora использует распределённое хранилище, то есть исполняющая машина отделена от хранилища, и исполняющих машин может быть много.
- Выше производительность за счёт оптимизированного I/O и репликации.
- Лучшая доступность и консистентность ответов (на скорость обработки кверей не влияет бекапирование), быстрый failover (менее 30 сек).
- Разница с MySQL/PostgreSQL: Aurora — проприетарный движок AWS, не open-source, но полностью совместим.

# Команды Terraform без лока стейта

**Команды, которые можно запускать без лока стейта (даже если он прописан):**
- `terraform init` — инициализирует конфигурацию.
- `terraform validate` — проверяет синтаксис.
- `terraform fmt` — форматирует код.
- `terraform show` — показывает состояние (только чтение).
- `terraform providers` — показывает провайдеров.
- `terraform console` — интерактивная консоль.
- `terraform graph` — строит граф зависимостей.

**Почему?** Эти команды не модифицируют состояние, а лишь читают конфигурацию или выполняют что-то локально. При этом локстейт можно игнорировать специальным параметром, или вообще удалять через force-unlock.

# Способы создания AMI

**Способы создания Amazon Machine Image (AMI):**
1. **Из существующей EC2 инстанс:** В консоли AWS сам инстанс → Actions → Image and templates → Create image. Создаёт AMI на основе текущего состояния инстанса.
2. **С помощью Packer:** Инструмент HashiCorp для автоматизированного создания AMI.
3. **Из EBS snapshot:** Создайте snapshot устройства, затем зарегистрируйте его как AMI с помощью `aws ec2 register-image`.
4. **Импорт из виртуальной машины:** Используйте VM Import/Export для импорта OVA/VMX файлов в AMI.
5. **Через AWS CLI/EC2 API:** Команда `aws ec2 create-image --instance-id i-1234567890abcdef0 --name "My AMI"`.

# Depends_on в Terraform: Когда нужен и примеры

Нужен, когда зависимость не указывается явно. В моих "проектах" это делается через приравнивание каких-то внутренних параметров одного ресурса к значениям другого, внешнего ресурса и тут депендс-он не нужен. 

resource "aws_internet_gateway" "main" {
  vpc_id = aws_vpc.main.id
}

Депендс-он нужен, когда какой-то ресурс должен создаться раньше другого, но нет зависимости в самом коде. У меня не было примеров с созданием ресурсов, но например local-exec выйдет чредовать только через депендс-он, иначе они выполнятся +- одновременно.

